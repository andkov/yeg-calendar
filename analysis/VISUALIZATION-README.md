# Edmonton Climate and Astronomical Visualizations

This document describes the visualizations generated by `visualization-graphs.R` to help understand Edmonton's climate and astronomical patterns throughout the solar year.

## Overview

Edmonton (53.5°N, 113.5°W) experiences extreme variation in daylight throughout the year due to its northern latitude. These visualizations help illustrate:

1. **Seasonal Light Patterns**: How daylight duration changes throughout the year
2. **Rate of Change**: How quickly daylight increases or decreases 
3. **Astronomical Events**: Key dates like solstices and equinoxes
4. **Cultural Context**: Integration with civic holidays and lunar events

## Running the Script

```r
# From the project root directory
source("./analysis/visualization-graphs.R")
```

The script will:
- Load sunrise/sunset data for Edmonton from 2024-2026
- Process astronomical events (solstices, equinoxes)
- Generate 8 comprehensive visualizations
- Save all graphs as high-resolution JPG files to `./analysis/prints/`

## Generated Visualizations

### 1. Annual Illumination Duration
**File**: `1-annual-illumination-duration.jpg`

Shows the complete arc of daylight hours from summer to winter and back. Two lines represent:
- **Blue line**: Total illumination (daylight + civil twilight)
- **Orange line**: Daylight only (sunrise to sunset)

**Key Insights**:
- Edmonton ranges from ~7.5 hours (winter solstice) to ~17 hours (summer solstice)
- Civil twilight adds 1-2 hours of usable light
- The curve is sinusoidal but asymmetric due to Earth's elliptical orbit

### 2. Daily Change in Daylight
**File**: `2-daily-change-in-daylight.jpg`

Displays how many minutes of daylight are gained or lost each day (smoothed curve).

**Key Insights**:
- Maximum daily gain: ~4 minutes per day around the spring equinox
- Maximum daily loss: ~4 minutes per day around the fall equinox  
- Change is minimal near the solstices (only seconds per day)
- The rate of change follows a cosine curve

### 3. Weekly Change in Daylight (By Season)
**File**: `3-weekly-change-in-daylight.jpg`

Shows weekly accumulation of daylight changes, color-coded by season.

**Key Insights**:
- Peak weekly gain: ~30 minutes per week in spring
- Peak weekly loss: ~30 minutes per week in fall
- Winter and summer show minimal weekly changes
- Seasonal transitions are dramatic and noticeable

### 4. Seasonal Comparison
**File**: `4-seasonal-comparison.jpg`

Plots illumination hours across the entire solar year (365 days from winter solstice to winter solstice).

**Key Insights**:
- Clear visualization of the four seasons
- Astronomical events (equinoxes, solstices) marked on the curve
- Shows the symmetry (and asymmetry) of the annual cycle
- Useful for understanding "solar seasons" vs calendar seasons

### 5. Sunrise and Sunset Times  
**File**: `5-sunrise-sunset-times.jpg`

Displays the actual clock times of sunrise and sunset throughout the year.

**Key Insights**:
- Summer sunrise: as early as 5:00 AM
- Winter sunrise: as late as 8:50 AM
- Summer sunset: as late as 10:00 PM  
- Winter sunset: as early as 4:15 PM
- The yellow band (daylight) and light blue bands (twilight) show the daily illumination window
- Demonstrates the compression of daylight into fewer hours in winter vs expansion in summer

### 6. Solar Weeks Illumination Progression
**File**: `6-solar-weeks-illumination.jpg`

Unique vertical bar chart showing each of the 52 solar weeks as a segment, split into ascending (winter→summer) and descending (summer→winter) halves.

**Key Insights**:
- Visual representation of the 52-week solar year
- Each week's starting illumination duration shown as colored segments
- Ascending half: weeks 1-26 (increasing daylight)
- Descending half: weeks 27-52 (decreasing daylight)
- The gradient shows the smooth progression

### 7. Quarterly Calendar Tiles
**File**: `7-quarterly-calendar-tiles.jpg`

Heat map calendar showing each day as a tile, organized into four quarters (Winter, Spring, Summer, Fall) of 13 weeks each.

**Key Insights**:
- Each quarter has 13 weeks × 7 days = 91 days
- Color intensity represents daily illumination hours
- Shows weekly patterns and monthly progression
- Useful for planning activities around available daylight
- Visually striking representation of the annual cycle

### 8. Extreme Days  
**File**: `8-extreme-days.jpg`

Highlights the most extreme days in Edmonton's solar calendar.

**Key Insights**:
- **Longest day** (summer solstice): ~17 hours of total illumination
- **Shortest day** (winter solstice): ~7.5 hours of total illumination
- **Variation**: Over 9 hours difference (~125% increase from shortest to longest)
- Marks when the fastest gains and losses occur (near equinoxes)

## Understanding Edmonton's Climate & Astronomy

### Geographic Context
- **Latitude**: 53.5°N (same as Dublin, Hamburg)
- **Longitude**: 113.5°W
- **Timezone**: Mountain Time (UTC-7, MST / UTC-6, MDT)

### Key Astronomical Facts

1. **Extreme Variation**: At 53.5°N, Edmonton experiences some of the most dramatic daylight variation in major North American cities. The 9+ hour difference between summer and winter days significantly impacts:
   - Daily routines and schedules
   - Energy consumption patterns
   - Mental health and seasonal affective disorder
   - Outdoor activity planning
   - Agricultural cycles

2. **Rapid Transitions**: Around the equinoxes (March 20 and September 22), daylight changes by approximately:
   - 4 minutes per day
   - 28 minutes per week
   - Nearly 2 hours per month

3. **Civil Twilight**: The extended twilight periods in summer (due to northern latitude) mean:
   - Evening light persists well after sunset
   - Morning light begins well before sunrise
   - "White nights" in late June with minimal true darkness

4. **Daylight Saving Time**: Alberta observes DST, which:
   - Begins: Second Sunday in March (2:00 AM → 3:00 AM)
   - Ends: First Sunday in November (2:00 AM → 1:00 AM)
   - Shifts daylight usage but doesn't change actual sun position

### Practical Implications

**Winter (Dec 21 - Mar 20)**
- Short days require artificial lighting for most working hours
- Snow cover reflects limited sunlight
- Cold temperatures despite some sunny days
- Vitamin D supplementation often recommended

**Spring (Mar 20 - Jun 20)**
- Rapid daylight increase is psychologically uplifting
- Snowmelt accelerates with increased solar radiation
- Best time for observing seasonal change
- Agricultural planting window opens

**Summer (Jun 20 - Sep 22)**
- Long days enable extended outdoor activities
- Late evening sunlight (past 10 PM)
- Midnight sun at higher latitudes (not quite in Edmonton)
- Peak growing season for agriculture

**Fall (Sep 22 - Dec 21)**
- Rapid daylight decrease  
- Harvest season before first frost
- Notable color changes in vegetation
- Psychological preparation for winter darkness

## Data Sources

- **Sunrise/Sunset Times**: NOAA Solar Calculator data for Edmonton
- **Astronomical Events**: Official equinox and solstice times from TimeAndDate.com
- **Civic Events**: Canadian statutory holidays and observances
- **Lunar Events**: Moon phase data (full moons, new moons)

## Technical Notes

### Data Processing
- **Solar Year Definition**: Runs from winter solstice to winter solstice (Dec 21, 2024 - Dec 21, 2025)
- **Illumination Measures**:
  - `illumination_day`: Sunrise to sunset
  - `illumination_sky`: Civil twilight periods
  - `illumination_total`: Combined daylight and twilight
- **Smoothing**: Spline smoothing applied to daily/weekly change data to reduce noise

### Dependencies
```r
library(ggplot2)   # visualization
library(dplyr)     # data manipulation  
library(tidyr)     # data tidying
library(lubridate) # date handling
library(stringr)   # string manipulation
library(readr)     # CSV import
library(scales)    # plot formatting
library(janitor)   # data cleaning
```

## Customization

Users can modify the script to:
- Change the date range analyzed
- Adjust graph aesthetics (colors, sizes, themes)
- Add additional event markers
- Export in different formats (PDF, PNG)
- Create animated versions showing change over time

Example customization:
```r
# Change output format to PNG with specific dimensions
quick_save <- function(g, name, ...){
  ggplot2::ggsave(
    filename = paste0(name, ".png"),
    plot = g,
    device = "png",
    path = prints_folder,
    dpi = 300,
    ...
  )
}
```

## Future Enhancements

Potential additions to consider:
1. **Temperature overlay**: Correlate daylight with average temperatures
2. **Historical comparison**: Compare multiple years of data
3. **Other cities**: Compare Edmonton to other latitudes
4. **Moon phase visualization**: Enhanced lunar event tracking
5. **Interactive plots**: Shiny app or plotly for exploration
6. **Animation**: Animate the progression through the year
7. **Aurora potential**: Overlay geomagnetic data for aurora viewing windows

## References

- [NOAA Solar Calculator](https://www.esrl.noaa.gov/gmd/grad/solcalc/)
- [TimeAndDate.com - Edmonton Sun & Moon](https://www.timeanddate.com/sun/canada/edmonton)
- [Alberta Time Change Directive](https://www.alberta.ca/time-change-directive)
- [Canadian Statutory Holidays](https://www.statutoryholidays.com/)

## Contributing

To contribute additional visualizations or improvements:
1. Follow the existing code structure and commenting style
2. Ensure graphs are publication-quality
3. Add documentation to this README
4. Test with multiple years of data
5. Consider accessibility (color-blind friendly palettes)

---

*Generated by visualization-graphs.R*  
*Part of the yeg-calendar project*  
*For questions or suggestions, please open an issue on GitHub*
